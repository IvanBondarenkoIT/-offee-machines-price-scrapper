# üö® –ü–£–°–¢–´–ï DEPLOY LOGS - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞!

## üîç –°–∏–º–ø—Ç–æ–º—ã

**Build**: ‚úÖ –£—Å–ø–µ—à–µ–Ω (95 —Å–µ–∫—É–Ω–¥)
**Deploy Logs**: ‚ùå –ü–£–°–¢–û!

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ù–ï –ó–ê–ü–£–°–ö–ê–ï–¢–°–Ø –≤–æ–æ–±—â–µ
- –ò–ª–∏ –ø–∞–¥–∞–µ—Ç –º–æ–ª—á–∞ –¥–æ –≤—ã–≤–æ–¥–∞ –ª–æ–≥–æ–≤
- CMD –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–ª–∏ –ø–∞–¥–∞–µ—Ç —Å—Ä–∞–∑—É

---

## üéØ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

**–ù–æ–≤—ã–π CMD –≤ Dockerfile**:
```dockerfile
CMD echo "========== Starting ==========" && \
    echo "Working directory: $(pwd)" && \
    echo "Files in /app:" && ls -la /app && \
    echo "Python version: $(python --version)" && \
    echo "Uvicorn version: $(python -m uvicorn --version)" && \
    echo "Starting uvicorn on port 8080..." && \
    exec uvicorn api_server:app --host 0.0.0.0 --port 8080 --log-level info
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞—Å—Ç**:
- ‚úÖ –£–≤–∏–¥–∏–º, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ª–∏ CMD –≤–æ–æ–±—â–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏–º —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
- ‚úÖ –£–≤–∏–¥–∏–º —Ñ–∞–π–ª—ã –≤ /app
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏–º –≤–µ—Ä—Å–∏–∏ Python/Uvicorn
- ‚úÖ –ü–æ–π–º–µ–º –Ω–∞ –∫–∞–∫–æ–º —à–∞–≥–µ –ø–∞–¥–∞–µ—Ç

---

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—É—Å—Ç—ã—Ö –ª–æ–≥–æ–≤

### 1. –ü—Ä–æ–±–ª–µ–º–∞ —Å USER appuser
```dockerfile
USER appuser
```
**–ü—Ä–æ–±–ª–µ–º–∞**: appuser –º–æ–∂–µ—Ç –Ω–µ –∏–º–µ—Ç—å –ø—Ä–∞–≤ –∑–∞–ø—É—Å—Ç–∏—Ç—å —á—Ç–æ-—Ç–æ

**–¢–µ—Å—Ç**: –í—Ä–µ–º–µ–Ω–Ω–æ —É–±—Ä–∞—Ç—å `USER appuser`

### 2. CMD –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
**–ü—Ä–æ–±–ª–µ–º–∞**: Docker –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç CMD

**–¢–µ—Å—Ç**: –î–æ–±–∞–≤–∏—Ç—å ENTRYPOINT

### 3. Python/Uvicorn –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
**–ü—Ä–æ–±–ª–µ–º–∞**: PATH –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è appuser

**–¢–µ—Å—Ç**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–µ –ø—É—Ç–∏

### 4. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
**–ü—Ä–æ–±–ª–µ–º–∞**: `import api_server` –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É

**–¢–µ—Å—Ç**: –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å `python -c "import api_server"`

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –®–∞–≥ 1: –°–º–æ—Ç—Ä–∏–º Deploy Logs –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ push

–î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è echo —Å–æ–æ–±—â–µ–Ω–∏—è:
```
========== Starting ==========
Working directory: /app
Files in /app:
...
```

### –®–∞–≥ 2: –ï—Å–ª–∏ –ª–æ–≥–∏ –≤—Å—ë –µ—â–µ –ø—É—Å—Ç—ã

–ó–Ω–∞—á–∏—Ç CMD –≤–æ–æ–±—â–µ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è!

**–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å**:
```dockerfile
# –ë–µ–∑ USER appuser (–∑–∞–ø—É—Å–∫ –æ—Ç root)
# USER appuser  ‚Üê –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å

CMD ["sh", "-c", "echo 'TEST' && uvicorn api_server:app --host 0.0.0.0 --port 8080"]
```

### –®–∞–≥ 3: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Dockerfile.minimal`:
```bash
# –í Railway Settings ‚Üí Build
# –£–∫–∞–∑–∞—Ç—å: docker build -f Dockerfile.minimal -t app .
```

---

## üÜò –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ - —É–±—Ä–∞—Ç—å USER

```dockerfile
# –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É —Å—Ç—Ä–æ–∫—É:
# USER appuser

# –ó–∞–ø—É—Å–∫–∞—Ç—å –æ—Ç root (–Ω–µ –∏–¥–µ–∞–ª—å–Ω–æ, –Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∞ OK)
CMD echo "TEST START" && exec uvicorn api_server:app --host 0.0.0.0 --port 8080
```

---

## üìä –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ —à–∞–≥–∞–º

| –ß—Ç–æ –≤–∏–¥–∏–º –≤ –ª–æ–≥–∞—Ö | –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|-------------------|----------|---------|
| –°–æ–≤—Å–µ–º –ø—É—Å—Ç–æ | CMD –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è | –£–±—Ä–∞—Ç—å USER appuser |
| Echo –≤–∏–¥–Ω–æ, –Ω–æ –¥–∞–ª—å—à–µ –ø—É—Å—Ç–æ | Uvicorn –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PATH |
| Traceback | –û—à–∏–±–∫–∞ –≤ –∫–æ–¥–µ | –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã |
| "Starting uvicorn..." –Ω–æ –¥–∞–ª—å—à–µ –ø—É—Å—Ç–æ | Uvicorn –ø–∞–¥–∞–µ—Ç | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å api_server.py |

---

## üîß –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∞

```dockerfile
# –í –∫–æ–Ω—Ü–µ Dockerfile:

# –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å USER
# USER appuser

# –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫
CMD ["python", "-m", "uvicorn", "api_server:app", "--host", "0.0.0.0", "--port", "8080"]
```

---

**–î–∞—Ç–∞**: 2025-10-14  
**–°—Ç–∞—Ç—É—Å**: üö® Deploy logs –ø—É—Å—Ç—ã–µ  
**–î–µ–π—Å—Ç–≤–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤ CMD  
**–û–∂–∏–¥–∞–Ω–∏–µ**: –õ–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è!

