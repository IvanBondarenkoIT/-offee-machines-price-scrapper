# üîß –û—Ç–ª–∞–¥–∫–∞ 502 –æ—à–∏–±–∫–∏ –Ω–∞ Railway

## ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ!

```
‚úÖ http://localhost:8000/ - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
‚úÖ http://localhost:8000/health - 200 OK
‚úÖ http://localhost:8000/docs - Swagger —Ä–∞–±–æ—Ç–∞–µ—Ç
```

**–í—ã–≤–æ–¥**: –ö–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–µ–Ω. –ü—Ä–æ–±–ª–µ–º–∞ –≤ Railway –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

---

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã 502 –Ω–∞ Railway

### 1. ‚è±Ô∏è Timeout –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–≥–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, Railway –æ—Ç–¥–∞–µ—Ç 502 –¥–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏.

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Railway Logs**:
```
–ò—â–µ–º —Å—Ç—Ä–æ–∫—É: "Application startup complete"
```

**–†–µ—à–µ–Ω–∏–µ**:
- –£–≤–µ–ª–∏—á–∏—Ç—å timeout –≤ Railway Settings
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å startup —Å–∫—Ä–∏–ø—Ç

---

### 2. üêõ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

**–ü—Ä–æ–±–ª–µ–º–∞**: –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –∏–ª–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞ Linux.

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Railway Logs**:
```
–ò—â–µ–º: Traceback, ModuleNotFoundError, ImportError
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã**:
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ requirements.railway.txt
- –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—É—Ç—è–º–∏ (Windows vs Linux)
- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º

**–†–µ—à–µ–Ω–∏–µ**:
```dockerfile
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
RUN pip list

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–æ–≤
RUN ls -la /app
```

---

### 3. üìÅ –ü—Ä–æ–±–ª–µ–º—ã —Å start.sh

**–ü—Ä–æ–±–ª–µ–º–∞**: –°–∫—Ä–∏–ø—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–ª–∏ –ø–∞–¥–∞–µ—Ç.

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
# start.sh –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å executable
RUN chmod +x /app/start.sh

# –î–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LF, –∞ –Ω–µ CRLF
```

**–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å start.sh —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è–º–∏ —Å—Ç—Ä–æ–∫

---

### 4. üîå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –ø–æ—Ä—Ç—É

**–ü—Ä–æ–±–ª–µ–º–∞**: Uvicorn —Å–ª—É—à–∞–µ—Ç –Ω–µ —Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ start.sh**:
```bash
exec uvicorn api_server:app \
    --host 0.0.0.0 \        # ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 0.0.0.0
    --port ${PORT:-8080}    # ‚úÖ –î–æ–ª–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å $PORT
```

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ**:
```bash
--host 127.0.0.1  # ‚ùå Localhost only
--port 8000       # ‚ùå –ñ–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–Ω—ã–π –ø–æ—Ä—Ç
```

---

### 5. üì¶ –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–∞–∫–æ–π-—Ç–æ –ø–∞–∫–µ—Ç –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```dockerfile
# –í Dockerfile –ø–æ—Å–ª–µ pip install
RUN pip list | grep -E "(fastapi|uvicorn|pydantic)"
```

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–∞–∫–µ—Ç—ã –≤ requirements.railway.txt

---

### 6. üö´ Health check –ø–∞–¥–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞**: Health check endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É.

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
curl http://localhost:$PORT/health
```

**–†–µ—à–µ–Ω–∏–µ**: –ú—ã —É–∂–µ –æ—Ç–∫–ª—é—á–∏–ª–∏ HEALTHCHECK –≤ Dockerfile

---

### 7. üîí –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü—Ä–æ–±–ª–µ–º–∞**: appuser –Ω–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫–∏ –∏–ª–∏ –∑–∞–ø–∏—Å–∞—Ç—å —Ñ–∞–π–ª—ã.

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Dockerfile**:
```dockerfile
USER appuser

# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –î–û –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ appuser
RUN mkdir -p /app/data && chown appuser:appuser /app/data
```

**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –ø–∞–ø–∫–∏ —Å–æ–∑–¥–∞–Ω—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏

---

## üéØ –ü–æ—à–∞–≥–æ–≤–∞—è –æ—Ç–ª–∞–¥–∫–∞ –¥–ª—è Railway

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏

Railway Logs ‚Üí Build:
```
–ò—â–µ–º –æ—à–∏–±–∫–∏ –ø—Ä–∏:
- apt-get install
- pip install
- COPY –∫–æ–º–∞–Ω–¥—ã
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∑–∞–ø—É—Å–∫–∞

Railway Logs ‚Üí Deploy:
```
========================================
Starting Coffee Price Monitor API
========================================
PORT: 8080                              ‚Üê –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç
PYTHON_ENV: production
Working directory: /app
Python version: Python 3.11.x
========================================

INFO:     Started server process [1]
INFO:     Waiting for application startup.
INFO:     Application startup complete.  ‚Üê –≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê!
INFO:     Uvicorn running on http://0.0.0.0:8080
```

### –®–∞–≥ 3: –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è —Ç–µ—Å—Ç–∞

–°–æ–∑–¥–∞–¥–∏–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π Dockerfile –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∞:

```dockerfile
FROM python:3.11-slim

WORKDIR /app

# –¢–æ–ª—å–∫–æ –º–∏–Ω–∏–º—É–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
RUN pip install fastapi uvicorn[standard]

# –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
COPY api_server.py .

# –ó–∞–ø—É—Å–∫ –Ω–∞–ø—Ä—è–º—É—é (–±–µ–∑ start.sh)
CMD ["uvicorn", "api_server:app", "--host", "0.0.0.0", "--port", "8080"]
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Railway Dashboard ‚Üí Variables:
```
PORT=8080           ‚Üê –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
PYTHON_ENV=production
```

---

## üîß –ë—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 1: –£–±—Ä–∞—Ç—å start.sh (—Ç–µ—Å—Ç)

```dockerfile
# –í–º–µ—Å—Ç–æ:
CMD ["/bin/bash", "/app/start.sh"]

# –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é:
CMD ["uvicorn", "api_server:app", "--host", "0.0.0.0", "--port", "8080"]
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2: –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```dockerfile
CMD ["uvicorn", "api_server:app", \
     "--host", "0.0.0.0", \
     "--port", "8080", \
     "--log-level", "debug"]  # –ë–æ–ª—å—à–µ –ª–æ–≥–æ–≤
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 3: –£–ø—Ä–æ—Å—Ç–∏—Ç—å Dockerfile

–£–±—Ä–∞—Ç—å –≤—Å—ë –ª–∏—à–Ω–µ–µ, –æ—Å—Ç–∞–≤–∏—Ç—å –º–∏–Ω–∏–º—É–º –¥–ª—è —Ç–µ—Å—Ç–∞.

---

## üìä –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] –õ–æ–≥–∏ —Å–±–æ—Ä–∫–∏ - —É—Å–ø–µ—à–Ω–æ?
- [ ] –õ–æ–≥–∏ –∑–∞–ø—É—Å–∫–∞ - –µ—Å—Ç—å "Application startup complete"?
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è PORT —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞?
- [ ] Health endpoint –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞?
- [ ] start.sh –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ?
- [ ] –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã?
- [ ] –ü–∞–ø–∫–∏ data/ —Å–æ–∑–¥–∞–Ω—ã?
- [ ] Uvicorn —Å–ª—É—à–∞–µ—Ç 0.0.0.0:$PORT?

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Railway** - —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ!
2. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å Dockerfile** –¥–ª—è —Ç–µ—Å—Ç–∞
3. **–£–±—Ä–∞—Ç—å start.sh** - –∑–∞–ø—É—Å–∫–∞—Ç—å uvicorn –Ω–∞–ø—Ä—è–º—É—é
4. **–î–æ–±–∞–≤–∏—Ç—å debug –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**

---

## üìù –®–∞–±–ª–æ–Ω –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤

**–ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ Railway Logs**:

```
‚úÖ –•–û–†–û–®–û:
INFO:     Started server process [1]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8080

‚ùå –ü–õ–û–•–û:
Traceback (most recent call last):
  File ...
ModuleNotFoundError: No module named 'fastapi'
  
‚ùå –ü–õ–û–•–û:
Error: /bin/bash: /app/start.sh: Permission denied

‚ùå –ü–õ–û–•–û:
OSError: [Errno 13] Permission denied: '/app/data'
```

---

**–î–∞—Ç–∞**: 2025-10-14  
**–°—Ç–∞—Ç—É—Å**: –õ–æ–∫–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ, Railway 502 ‚ùå  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Railway

