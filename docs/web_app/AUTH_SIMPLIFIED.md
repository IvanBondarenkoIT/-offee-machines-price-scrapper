# Упрощённая система аутентификации

## Обзор

Система аутентификации упрощена: теперь используется **один логин и пароль из переменных окружения (ENV)**, без необходимости управления пользователями в базе данных.

## Как это работает

1. **Логин и пароль** берутся из переменных окружения:
   - `ADMIN_USERNAME` - имя пользователя
   - `ADMIN_PASSWORD` - пароль

2. **Все залогиненные пользователи** автоматически имеют роль `admin`

3. **Нет управления пользователями** - всё настроено через ENV переменные

## Настройка

### Локальная разработка

Создайте файл `.env` в корне проекта:

```env
ADMIN_USERNAME=admin
ADMIN_PASSWORD=your-secure-password-here
ADMIN_EMAIL=admin@company.com
```

### Railway (Production)

Установите переменные окружения в Railway:

```env
ADMIN_USERNAME=admin
ADMIN_PASSWORD=your-very-secure-password
ADMIN_EMAIL=admin@company.com
```

## Изменения в коде

- ✅ Создан класс `SimpleUser` (`web_app/utils/simple_user.py`) - не требует БД
- ✅ Обновлён `routes/auth.py` - проверка через ENV
- ✅ Обновлён `app.py` - user_loader использует SimpleUser
- ✅ Обновлены декораторы - работают с новой системой
- ✅ Отключены маршруты управления пользователями
- ✅ Убрана ссылка "Users" из сайдбара

## Безопасность

⚠️ **Важно**: 
- Установите **надёжный пароль** в `ADMIN_PASSWORD`
- **Никогда** не коммитьте `.env` файл в Git
- В production используйте **длинные случайные пароли**

## Технические детали

- Класс `SimpleUser` реализует `UserMixin` от Flask-Login
- Все проверки ролей (`current_user.role`) работают как раньше
- Система полностью совместима с существующими декораторами (`@login_required`, `@admin_required`)

