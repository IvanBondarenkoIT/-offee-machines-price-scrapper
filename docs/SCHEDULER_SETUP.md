# Настройка периодического запуска (Windows Task Scheduler)

## Вариант 1. Через готовые .bat файлы (рекомендуется)

1) Запуск вручную в один клик:
- Дважды кликните `RUN_FULL_CYCLE_AND_UPLOAD.bat`
- Скрипт выполнит полный цикл, выгрузит данные на веб и сохранит лог в `logs/`

2) Установка ежедневного расписания (например, в 08:30):
- Запустите `SCHEDULE_INSTALL.bat` так:
```
SCHEDULE_INSTALL.bat 08:30
```
- Это создаст задачу `CoffeePriceMonitor_Daily` в планировщике

3) Удаление расписания:
```
SCHEDULE_UNINSTALL.bat
```

Примечания:
- Задача создаётся под текущим пользователем и с максимальными правами
- ПК должен быть включен и пользователь может быть не залогинен (см. Вариант 2 для более точного контроля)

## Вариант 2. Через ГУИ Task Scheduler (Планировщик заданий)

1) Откройте `Планировщик заданий` → `Создать задачу…`
2) Вкладка `Общие`:
- Имя: `CoffeePriceMonitor_Daily`
- Флажок: `Выполнять с наивысшими правами`
- Параметр безопасности: `Выполнять, только если пользователь вошёл в систему` (или `выполнять, даже если…` при необходимости)
3) Вкладка `Триггеры` → `Создать…`:
- По расписанию: Ежедневно, Время: 08:30
4) Вкладка `Действия` → `Создать…`:
- Действие: `Запуск программы`
- Программа/скрипт: укажите путь до `RUN_FULL_CYCLE_AND_UPLOAD.bat`
- Рабочая папка: путь к корню проекта
5) Вкладка `Условия` и `Параметры` по потребности
6) Сохраните задачу

## Требования к окружению
- Установлен Python (доступен в PATH), либо используйте `venv\Scripts\python.exe`
- В корне проекта файл `.env` с:
```
API_KEY=...
API_UPLOAD_URL=https://.../api/upload
```
- Интернет-доступ

## Где смотреть логи
- Все запуски складываются в `logs/run_YYYY-MM-DD_HH-MM-SS.log`
- Откройте последний лог через Блокнот

## Частые вопросы
- `upload_data.py` пишет "API_KEY required": проверьте `.env` в корне
- Хотите запускать несколько раз в день? Создайте несколько триггеров в задаче на разные времена
- Сменился URL Railway — обновите `API_UPLOAD_URL` в `.env`
