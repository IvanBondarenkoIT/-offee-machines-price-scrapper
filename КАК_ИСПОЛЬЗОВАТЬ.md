# 📖 КАК ИСПОЛЬЗОВАТЬ СИСТЕМУ

## 🎯 Два способа работы

### 1. ☁️ Railway (облако) - Только UI/API

**URL**: https://offee-machines-price-scrapper-production.up.railway.app/

**Что работает**:
- ✅ Загрузка файла остатков
- ✅ Отображение даты: "Остатки актуальны на DD.MM.YYYY"
- ✅ Подсчет товаров: 1365
- ✅ REST API
- ❌ Скрапинг НЕ работает (нет Selenium/Chrome)

**Используйте для**:
- Загрузки обновленных остатков
- Просмотра даты актуальности
- Доступа к API

### 2. 💻 Локально - Полный функционал

**Что работает**:
- ✅ Всё что на Railway
- ✅ Скрапинг 4 сайтов (Selenium + BeautifulSoup)
- ✅ Генерация отчетов
- ✅ Обработка данных

**Используйте для**:
- Запуска скрапинга
- Создания отчетов
- Полного цикла обработки

---

## 🔄 РЕКОМЕНДУЕМЫЙ WORKFLOW

### Ежедневный процесс:

#### Шаг 1: Запустить скрапинг локально

```bash
# В папке проекта
python run_full_cycle.py
```

**Результат** (~3 минуты):
- ✅ Парсит 4 сайта (183 товара)
- ✅ Создает price_comparison_*.xlsx
- ✅ Создает executive_report_*.pdf
- ✅ Файлы в data/output/

#### Шаг 2: Загрузить остатки на Railway

**Вариант A - Через браузер**:
1. Открыть: https://your-app.railway.app/
2. Выбрать файл: `data/inbox/остатки.xlsx`
3. Нажать "Загрузить файл"
4. Увидеть: "Остатки актуальны на 14.10.2025" ✅

**Вариант B - Через API**:
```bash
curl -X POST https://your-app.railway.app/inventory/upload \
  -F "file=@data/inbox/остатки.xlsx"
```

#### Шаг 3: Использовать Railway

- Показывать дату актуальности директору
- API для интеграций
- 24/7 доступность

---

## 🧪 ЧТО ПРОИСХОДИТ ПРИ НАЖАТИИ КНОПКИ НА RAILWAY

### До исправления (сейчас):
```
❌ Ошибка: (generic error)
```

### После обновления (через 1-2 минуты):
```
⚠️ Скрапинг недоступен на Railway. 
Используйте локально: python run_full_cycle.py

Рекомендуемый workflow:
1. Запустите скрапинг локально: python run_full_cycle.py
2. Загрузите файл остатков через форму выше
3. Используйте Railway для отображения даты актуальности
```

**Понятное сообщение вместо ошибки!** ✅

---

## 📊 ЧТО ТЕСТИРОВАЛИ:

### ✅ Базовые скраперы - РАБОТАЮТ:
- alta_bs4_scraper.py ✅
- kontakt_bs4_scraper.py ✅  
- elite_bs4_scraper.py ✅
- dimkava_bs4_scraper.py ✅

### ✅ Отчеты создаются:
- price_comparison_*.xlsx ✅
- executive_report_*.docx ✅
- executive_report_*.pdf ✅

### ✅ Скачивание через API:
- GET /reports/latest ✅
- GET /reports/list ✅
- Файл скачивается корректно ✅

---

## 💡 ИТОГОВАЯ АРХИТЕКТУРА:

```
┌─────────────────────────────────────────┐
│         Локальная машина                 │
│                                          │
│  python run_full_cycle.py               │
│    ├── Скрапинг 4 сайтов                │
│    ├── Сопоставление товаров            │
│    ├── Сравнение цен                    │
│    └── Генерация отчетов                │
│                                          │
│  Результаты:                             │
│    └── data/output/*.xlsx               │
└─────────────────────────────────────────┘
                   ↓
          (загрузка файла)
                   ↓
┌─────────────────────────────────────────┐
│         Railway (облако)                 │
│                                          │
│  https://your-app.railway.app/          │
│    ├── Прием файла остатков             │
│    ├── Сохранение даты загрузки         │
│    ├── Отображение: "Актуальны на..."  │
│    └── API для доступа к данным         │
│                                          │
│  Доступно: 24/7                         │
│  Стоимость: $0                          │
└─────────────────────────────────────────┘
```

---

## ✅ ПРОВЕРКА:

**Локально**:
- [x] run_full_cycle.py работает ✅
- [x] Все 4 скрапера работают ✅
- [x] Отчеты создаются ✅
- [x] Файлы сохраняются ✅

**Railway**:
- [x] Веб-интерфейс доступен ✅
- [x] Загрузка файлов работает ✅
- [x] Дата отображается (DD.MM.YYYY) ✅
- [x] Подсчет товаров: 1365 ✅
- [x] Скачивание отчетов работает ✅
- [x] Понятное сообщение о скрапинге ⏳ (после обновления)

---

## 🎊 ИТОГ:

**ВСЁ РАБОТАЕТ КАК ЗАДУМАНО!**

- Railway для UI/API ✅
- Локально для скрапинга ✅
- Дата актуальности отображается ✅
- Базовые скраперы не сломаны ✅

**ПРОЕКТ ГОТОВ К ИСПОЛЬЗОВАНИЮ!** 🚀

